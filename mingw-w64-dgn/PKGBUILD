# Maintainer: nyfair <nyfair2012@gmail.com>

pkgname=mingw-w64-dgn
pkgver=6.2
pkgrel=1
_pkgdate=20160819
pkgdesc="GCC for the MinGW-w64"
arch=('x86_64')
url="http://www.drangon.org/mingw/"
provides=('gcc' 'binutils' 'cloog' 'isl' 'mpc' 'yasm' 'gdb')
license=('GPL')
options=('!strip')
source=("http://downloads.sourceforge.net/mingw-w64-dgn/mingw-w64/mingw-w64-bin-x86_64-$_pkgdate.7z")
md5sums=('SKIP')

package() {
  cd "${srcdir}"
  rm -f mingw64/bin/{make*,vs*} mingw64/include/gnumake.h
  rm -rf mingw64/mingw
  rm -rf mingw64/share/{gcc*,gdb}
  cp mingw64/bin/strip.exe ${pkgdir}
  find . -name "*.exe" |xargs -i ${pkgdir}/strip {}
  find . -name "*.dll" |xargs -i ${pkgdir}/strip {}
  rm ${pkgdir}/strip.exe
  mv mingw64 ${pkgdir}/usr
}
